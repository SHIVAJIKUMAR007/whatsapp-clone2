(this.webpackJsonpbasics=this.webpackJsonpbasics||[]).push([[0],{52:function(e,a,t){e.exports=t.p+"static/media/logo.1a4ea1db.svg"},56:function(e,a,t){e.exports=t(80)},61:function(e,a,t){},62:function(e,a,t){},78:function(e,a,t){},80:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(24),r=t.n(c),o=(t(61),t(16)),m=(t(62),t(47)),s=t.n(m),i=t(48),u=t.n(i),d=t(36),p=t.n(d),E=t(33),g=t.n(E),h=t(93),f=t(26),v=t.n(f),b=v.a.initializeApp({apiKey:"AIzaSyDc4GmNHGmtTAqTfzNR_pU2fUolqhba9N8",authDomain:"whatsapp-dfb3c.firebaseapp.com",databaseURL:"https://whatsapp-dfb3c.firebaseio.com",projectId:"whatsapp-dfb3c",storageBucket:"whatsapp-dfb3c.appspot.com",messagingSenderId:"801288025216",appId:"1:801288025216:web:fa5bd2a212ec7c6850a265"}).firestore(),w=v.a.auth(),N=new v.a.auth.GoogleAuthProvider,y=t(23);var S=function(e){var a,t=e.id,c=e.name,r=Object(n.useState)([]),m=Object(o.a)(r,2),s=m[0],i=m[1];return b.collection("rooms").doc(t).collection("massage").orderBy("time","desc").onSnapshot((function(e){i(e.docs.map((function(e){return e.data()})))})),l.a.createElement(l.a.Fragment,null,l.a.createElement(y.b,{to:"/".concat(t),className:"NavLink"},l.a.createElement("div",{className:"m-4 row",id:"rooms"},l.a.createElement("figure",{style:{width:"20%"}},l.a.createElement("img",{src:"https://joeschmoe.io/api/v1/".concat(c),alt:"fi"})),l.a.createElement("div",{style:{width:"80%",placeItems:"center"}},l.a.createElement("h6",{className:"pl-3"},c),l.a.createElement("p",{className:" text-center"},s.length?null===(a=s[0])||void 0===a?void 0:a.massage:"new room to chat")))))},j=function(){var e=JSON.parse(window.localStorage.getItem("user")).user;return l.a.createElement("div",{className:"sidebar_header row px-5 mb-3"},l.a.createElement("div",{style:{width:"20%"}},l.a.createElement("img",{src:e.photoURL,alt:"avatar",style:{marginTop:"1rem",height:"2.5rem",width:"2.5rem",borderRadius:"50%"}})),l.a.createElement("div",{className:"ml-auto row"},l.a.createElement(h.a,null,l.a.createElement(s.a,{className:"icons"})),l.a.createElement(h.a,null,l.a.createElement(u.a,{className:"icons"})),l.a.createElement(h.a,null,l.a.createElement(p.a,{className:"icons"}))))},x=function(){var e=Object(n.useState)([]),a=Object(o.a)(e,2),t=a[0],c=a[1],r=Object(n.useState)(""),m=Object(o.a)(r,2),s=m[0],i=m[1];return Object(n.useEffect)((function(){b.collection("rooms").onSnapshot((function(e){return c(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),l.a.createElement("div",{className:"sidebar",style:{borderRight:"0.1rem solid black"}},l.a.createElement(j,null),l.a.createElement("div",{className:"sidebar_searchBox m-3 px-3"},l.a.createElement("div",{className:"row",style:{border:"0.1rem solid black",borderRadius:"6rem"}},l.a.createElement(g.a,null),l.a.createElement("input",{type:"text",name:"searchBox",value:s,onChange:function(e){i(e.target.value)},placeholder:"search a new chat room",style:{width:"80%",outlineWidth:"0",border:"0"}}))),l.a.createElement("div",{className:"sidebar_room"},l.a.createElement("h4",{className:"m-4",style:{cursor:"pointer"},onClick:function(){var e=prompt("Add new room");e&&b.collection("rooms").add({name:e})}},"Add a new Room"),t.map((function(e){return l.a.createElement(S,{key:e.id,id:e.id,name:e.data.name})}))))},O=(t(78),t(5)),I=t(94),k=t(50),B=t.n(k),D=t(51),F=t.n(D),R=t(49),C=t.n(R);var T=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"d-flex justify-content-center align-items-center",style:{width:"100%",height:"100%"}},l.a.createElement("h1",null,"Start Chatting")))};var A=function(e){var a,t=e.name,n=e.massage;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"chat_header"},l.a.createElement(I.a,{src:"https://joeschmoe.io/api/v1/".concat(t)}),l.a.createElement("div",{className:"chat_headerInfo"},l.a.createElement("h4",null,t),l.a.createElement("p",null,n.length?"  Last Seen at"+new Date(null===(a=n[n.length-1])||void 0===a?void 0:a.time.toDate()).toUTCString():"No massage till now")),l.a.createElement(h.a,null,l.a.createElement(g.a,null)),l.a.createElement(h.a,null,l.a.createElement(p.a,null))))},U=function(){var e=Object(n.useState)([]),a=Object(o.a)(e,2),t=a[0],c=a[1],r=Object(n.useState)(""),m=Object(o.a)(r,2),s=m[0],i=m[1],u=Object(n.useState)(""),d=Object(o.a)(u,2),p=d[0],E=d[1],g=Object(O.f)().roomId;Object(n.useEffect)((function(){g&&(b.collection("rooms").doc(g).onSnapshot((function(e){E(e.data().name)})),b.collection("rooms").doc(g).collection("massage").orderBy("time","asc").onSnapshot((function(e){c(e.docs.map((function(e){return e.data()})))})))}),[g]);var f=JSON.parse(window.localStorage.getItem("user")).user,w=function(e){e.preventDefault(),b.collection("rooms").doc(g).collection("massage").add({email:f.email,name:f.displayName,massage:s,time:v.a.firestore.FieldValue.serverTimestamp()}),i("")};return l.a.createElement("div",{className:"chat"},l.a.createElement(A,{key:"1",name:p,massage:t}),l.a.createElement("div",{className:"chatBody"},g?l.a.createElement(l.a.Fragment,null,null===t||void 0===t?void 0:t.map((function(e,a){var t;return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:e.email===f.email?"receiverMassages my-4":"otherMassages my-4"},l.a.createElement("span",{className:"massageName"},e.name),l.a.createElement("br",null),e.massage+" ",l.a.createElement("span",{className:"massageTime"},new Date(null===(t=e.time)||void 0===t?void 0:t.toDate()).toUTCString())))}))):l.a.createElement(T,null)),l.a.createElement("div",{className:"massageBox row px-4"},l.a.createElement(h.a,null,l.a.createElement(C.a,null)),l.a.createElement(h.a,null,l.a.createElement(B.a,null)),l.a.createElement("form",{action:"",onSubmit:w,className:"row massageForm mt-2",style:{flex:"1"}},l.a.createElement("input",{type:"text",name:"Massage",placeholder:"Type a massage",value:s,onChange:function(e){return i(e.target.value)},className:"form-control mx-auto",style:{flex:"1",borderRadius:"5rem"}}),l.a.createElement(h.a,{onClick:w},l.a.createElement(F.a,{type:"submit",style:{top:"-0.6rem"}})))))},_=(t(79),t(52)),J=t.n(_);var L=function(e){var a=e.signin;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container mainDivLogin"},l.a.createElement("div",{className:"centerDiv"},l.a.createElement("center",null,l.a.createElement("img",{src:J.a,alt:"img"})),l.a.createElement("h4",{className:"text-center mb-4"},"sign in with google"),l.a.createElement("center",null,l.a.createElement("button",{className:" btn btn-success",onClick:a},"sign in with google")))))},z=function(){var e=window.localStorage.getItem("user"),a=Object(n.useState)(e),t=Object(o.a)(a,2),c=t[0],r=t[1];return l.a.createElement(l.a.Fragment,null,c?l.a.createElement("div",{className:"container whatsappBody "},l.a.createElement("div",{className:"row whatsappBodyRow d-flex flex-row"},l.a.createElement(x,null),l.a.createElement(O.c,null,l.a.createElement(O.a,{exact:!0,path:"/:roomId",component:U}),l.a.createElement(O.a,{exact:!0,path:"/",component:U})))):l.a.createElement(L,{key:"1",signin:function(){w.signInWithPopup(N).then((function(e){window.localStorage.setItem("user",JSON.stringify(e));var a=window.localStorage.getItem("user");r(a)})).catch((function(e){return console.log(e.massage)}))}}))};r.a.render(l.a.createElement(y.a,null,l.a.createElement(z,null)),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.c5f3a997.chunk.js.map