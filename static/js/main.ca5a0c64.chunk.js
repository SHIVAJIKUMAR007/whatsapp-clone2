(this.webpackJsonpbasics=this.webpackJsonpbasics||[]).push([[0],{54:function(e,a,t){e.exports=t.p+"static/media/logo.1a4ea1db.svg"},58:function(e,a,t){e.exports=t(83)},63:function(e,a,t){},64:function(e,a,t){},81:function(e,a,t){},83:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(24),r=t.n(c),o=(t(63),t(16)),s=(t(64),t(48)),m=t.n(s),i=t(49),u=t.n(i),d=t(36),p=t.n(d),E=t(33),g=t.n(E),h=t(96),f=t(26),v=t.n(f),b=v.a.initializeApp({apiKey:"AIzaSyDc4GmNHGmtTAqTfzNR_pU2fUolqhba9N8",authDomain:"whatsapp-dfb3c.firebaseapp.com",databaseURL:"https://whatsapp-dfb3c.firebaseio.com",projectId:"whatsapp-dfb3c",storageBucket:"whatsapp-dfb3c.appspot.com",messagingSenderId:"801288025216",appId:"1:801288025216:web:fa5bd2a212ec7c6850a265"}).firestore(),w=v.a.auth(),N=new v.a.auth.GoogleAuthProvider,y=t(23);var S=function(e){var a,t=e.id,c=e.name,r=Object(n.useState)([]),s=Object(o.a)(r,2),m=s[0],i=s[1];return b.collection("rooms").doc(t).collection("massage").orderBy("time","desc").onSnapshot((function(e){i(e.docs.map((function(e){return e.data()})))})),l.a.createElement(l.a.Fragment,null,l.a.createElement(y.b,{to:"/".concat(t),className:"NavLink"},l.a.createElement("div",{className:"m-4 row",id:"rooms"},l.a.createElement("figure",{style:{width:"20%"}},l.a.createElement("img",{src:"https://joeschmoe.io/api/v1/".concat(c),alt:"fi"})),l.a.createElement("div",{style:{width:"80%",placeItems:"center"}},l.a.createElement("h6",{className:"pl-3"},c),l.a.createElement("p",{className:" text-center"},m.length?null===(a=m[0])||void 0===a?void 0:a.massage:"new room to chat")))))},j=function(){var e=JSON.parse(window.localStorage.getItem("user")).user;return l.a.createElement("div",{className:"sidebar_header row px-5 mb-3"},l.a.createElement("div",{style:{width:"20%"}},l.a.createElement("img",{src:e.photoURL,alt:"avatar",style:{marginTop:"1rem",height:"2.5rem",width:"2.5rem",borderRadius:"50%"}})),l.a.createElement("div",{className:"ml-auto row"},l.a.createElement(h.a,null,l.a.createElement(m.a,{className:"icons"})),l.a.createElement(h.a,null,l.a.createElement(u.a,{className:"icons"})),l.a.createElement(h.a,null,l.a.createElement(p.a,{className:"icons"}))))},x=function(){var e=Object(n.useState)([]),a=Object(o.a)(e,2),t=a[0],c=a[1],r=Object(n.useState)(""),s=Object(o.a)(r,2),m=s[0],i=s[1];return Object(n.useEffect)((function(){b.collection("rooms").onSnapshot((function(e){return c(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),l.a.createElement("div",{className:"sidebar",style:{borderRight:"0.1rem solid black"}},l.a.createElement(j,null),l.a.createElement("div",{className:"sidebar_searchBox m-3 px-3"},l.a.createElement("div",{className:"row",style:{border:"0.1rem solid black",borderRadius:"6rem"}},l.a.createElement(g.a,null),l.a.createElement("input",{type:"text",name:"searchBox",value:m,onChange:function(e){i(e.target.value)},placeholder:"search a new chat room",style:{width:"80%",outlineWidth:"0",border:"0"}}))),l.a.createElement("div",{className:"sidebar_room"},l.a.createElement("h4",{className:"m-4",style:{cursor:"pointer"},onClick:function(){var e=prompt("Add new room");e&&b.collection("rooms").add({name:e})}},"Add a new Room"),t.map((function(e){return l.a.createElement(S,{key:e.id,id:e.id,name:e.data.name})}))))},O=t(39),I=t.n(O),k=t(50),B=(t(81),t(5)),D=t(97),F=t(52),R=t.n(F),T=t(53),C=t.n(T),A=t(51),U=t.n(A);var _=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"d-flex justify-content-center align-items-center",style:{width:"100%",height:"100%"}},l.a.createElement("h1",null,"Start Chatting")))};var J=function(e){var a,t,n=e.name,c=e.massage;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"chat_header"},l.a.createElement(D.a,{src:"https://joeschmoe.io/api/v1/".concat(n)}),l.a.createElement("div",{className:"chat_headerInfo"},l.a.createElement("h4",null,n),l.a.createElement("p",null,c.length?"  Last Seen at"+new Date(null===(a=c[c.length-1])||void 0===a||null===(t=a.time)||void 0===t?void 0:t.toDate()).toUTCString():"No massage till now")),l.a.createElement(h.a,null,l.a.createElement(g.a,null)),l.a.createElement(h.a,null,l.a.createElement(p.a,null))))},L=function(){var e=Object(n.useState)([]),a=Object(o.a)(e,2),t=a[0],c=a[1],r=Object(n.useState)(""),s=Object(o.a)(r,2),m=s[0],i=s[1],u=Object(n.useState)(""),d=Object(o.a)(u,2),p=d[0],E=d[1],g=Object(B.f)().roomId,f={len:0};Object(n.useEffect)((function(){g&&(b.collection("rooms").doc(g).onSnapshot((function(e){var a;E(null===(a=e.data())||void 0===a?void 0:a.name)})),b.collection("rooms").doc(g).collection("massage").orderBy("time","asc").onSnapshot((function(e){c(e.docs.map((function(e){return e.data()})))})))}),[g]);var w=JSON.parse(window.localStorage.getItem("user")).user,N=function(e){e.preventDefault(),b.collection("rooms").doc(g).collection("massage").add({email:w.email,name:w.displayName,massage:m,time:v.a.firestore.FieldValue.serverTimestamp()}),i("")};return setInterval(function(){var e=Object(k.a)(I.a.mark((function e(){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=t.length)>f.len&&(document.getElementById("chatbody").scrollTop=document.getElementById("chatbody").scrollHeight,f.len=a);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),200),l.a.createElement("div",{className:"chat"},l.a.createElement(J,{key:"1",name:p,massage:t}),l.a.createElement("div",{className:"chatBody",id:"chatbody"},g?l.a.createElement(l.a.Fragment,null,null===t||void 0===t?void 0:t.map((function(e){var a;return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:e.email===w.email?"receiverMassages my-4":"otherMassages my-4"},l.a.createElement("span",{className:"massageName"},e.name),l.a.createElement("br",null),e.massage+" ",l.a.createElement("span",{className:"massageTime"},new Date(null===(a=e.time)||void 0===a?void 0:a.toDate()).toUTCString())))}))):l.a.createElement(_,null)),l.a.createElement("div",{className:"massageBox row px-4"},l.a.createElement(h.a,null,l.a.createElement(U.a,null)),l.a.createElement(h.a,null,l.a.createElement(R.a,null)),l.a.createElement("form",{action:"",onSubmit:N,className:"row massageForm mt-2",style:{flex:"1"}},l.a.createElement("input",{type:"text",name:"Massage",placeholder:"Type a massage",value:m,onChange:function(e){return i(e.target.value)},className:"form-control mx-auto",style:{flex:"1",borderRadius:"5rem"}}),l.a.createElement(h.a,{onClick:N},l.a.createElement(C.a,{type:"submit",style:{top:"-0.6rem"}})))))},z=(t(82),t(54)),G=t.n(z);var M=function(e){var a=e.signin;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container mainDivLogin"},l.a.createElement("div",{className:"centerDiv"},l.a.createElement("center",null,l.a.createElement("img",{src:G.a,alt:"img"})),l.a.createElement("h4",{className:"text-center mb-4"},"sign in with google"),l.a.createElement("center",null,l.a.createElement("button",{className:" btn btn-success",onClick:a},"sign in with google")))))},q=function(){var e=window.localStorage.getItem("user"),a=Object(n.useState)(e),t=Object(o.a)(a,2),c=t[0],r=t[1];return l.a.createElement(l.a.Fragment,null,c?l.a.createElement("div",{className:"container whatsappBody "},l.a.createElement("div",{className:"row whatsappBodyRow d-flex flex-row"},l.a.createElement(x,null),l.a.createElement(B.c,null,l.a.createElement(B.a,{exact:!0,path:"/:roomId",component:L}),l.a.createElement(B.a,{exact:!0,path:"/",component:L})))):l.a.createElement(M,{key:"1",signin:function(){w.signInWithPopup(N).then((function(e){window.localStorage.setItem("user",JSON.stringify(e));var a=window.localStorage.getItem("user");r(a)})).catch((function(e){return console.log(e.massage)}))}}))};r.a.render(l.a.createElement(y.a,null,l.a.createElement(q,null)),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.ca5a0c64.chunk.js.map